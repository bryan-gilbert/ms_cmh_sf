<aura:component controller="cmh18_CaseEmailListController" >
    <aura:attribute name="emails" type="EmailMessage[]" />
    <aura:attribute name="version" type="String" default="elist-v0.57"/>
    <aura:attribute name="globals" type="Object"/>
	<aura:attribute name="caseId" type="String" />
	<aura:attribute name="count" type="Integer" />
	<aura:attribute name="message" type="String" default="empty" />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
	<aura:registerEvent name="cmh18_CaseEmailDetailEvent" type="c:cmh18_CaseEmailDetailEvent" />
	<aura:registerEvent name="cmh18_OpenEditEmailPanelEvent" type="c:cmh18_OpenEditEmailPanelEvent" />    
    <!-- cmh18_LoadEmailEvent fired by this component when it need an email to be loaded -->
	<aura:registerEvent name="cmh18_LoadEmailEvent" type="c:cmh18_LoadEmailEvent" />
   	<aura:attribute name="showInfo" type="Boolean" /> 
    
<article class="slds-card">
	<div class="slds-card__header slds-grid">
		<header class="slds-media slds-media_center slds-has-flexi-truncate">
			<div class="slds-media__body">
				<h2 class="slds-card__header-title">
					<span class="slds-text-heading_small">Emails ({!v.count})</span>
				</h2>
			</div>
			<!--div class="slds-no-flex">
				<button class="slds-button slds-button_neutral">New</button> 
			</div-->
		</header>
	</div>
	<div class="slds-card__body">
		<table class="slds-table slds-table_fixed-layout slds-table_bordered slds-no-row-hover slds-table_cell-buffer">
			<tbody>
				<aura:iteration items="{!v.emails}" indexVar="key" var="email">                    
				<tr class="slds-hint-parent">
                    <c:cmh18_EmailListItem email="{!email}"/>
				</tr>
				</aura:iteration>
			</tbody>
		</table>
	</div>
	<footer class="slds-card__footer">
<span class="slds-text-body_small slds-text-color_weak">{!v.version} &nbsp;-&nbsp; {!v.caseId}&nbsp;</span>
	</footer>
</article> 	
</aura:component>