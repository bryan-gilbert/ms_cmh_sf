<aura:component controller="cmh18_CaseEmailListController" implements="flexipage:availableForRecordHome,force:hasRecordId" access="global">
    <!-- uses cmh18_EditEmailPanel, cmh18_EmailDetail, and cmh18_UserInfo -->
    <!-- https://github.com/bryan-gilbert/ms_cmh_sf -->
    <aura:attribute name="emails" type="EmailMessage[]" />
    <aura:attribute name="version" type="String" default="cev-v0.71"/>
    <aura:attribute name="globals" type="Object" default="{UserId:'1'}"/>
	<aura:attribute name="recordId" type="String" />

    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
   	<aura:attribute name="showInfo" type="Boolean" /> 
    
    
	<div class="slds-grid slds-gutters">
		<div class="slds-col slds-size_2-of-4">
            
            <c:cmh18_EmailList globals="{!v.globals}" caseId="{!v.recordId}"/>

<c:cmh18_AttachmentList/>   
<c:cmh18_EmailSender/>
            
            
<div class="slds-text-body_small slds-text-color_weak">{!v.version} &nbsp;-&nbsp; {!v.recordId}</div>
</div>
        <!-- End Left and start Right side panel -->
		<div class="slds-col slds-size_2-of-4 cmh18_cev_right_panel">
            <c:cmh18_EditEmailPanel globals="{!v.globals}"/>
			<c:cmh18_EmailDetail />
		</div>
	</div>
    
    
    <!-- include email loader non-UI element -->
    <c:cmh18_EmailLoader />
    <c:cmh18_AttachmentsLoader globals="{!v.globals}" caseId="{!v.recordId}"/>

    <!-- include user infor loader with optional UI -->
    <aura:if isTrue="{!v.showInfo}">
        <button onclick="{!c.closeUserInfo}">
        <lightning:icon class="icn" iconName="utility:close" size="xx-small" alternativeText="hide user info" />
            Hide user info
        </button>
    <aura:set attribute="else">
        <button onclick="{!c.openUserInfo}">
        <lightning:icon class="icn" iconName="utility:preview" size="xx-small" alternativeText="show user info" />
            Show user info
        </button>
        </aura:set>
    </aura:if>            
    <c:cmh18_UserInfo showInfo="{!v.showInfo}" globals="{!v.globals}"/>   
    
</aura:component>